<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Integrators &mdash; Wiki  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Shooters" href="../shooters/index.html" />
    <link rel="prev" title="Overview" href="PID.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Wiki
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/Tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/Electronics.html">Electronics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/DriveBase.html">Drive Bases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/GearShifting.html">Gear Shifting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/Pneumatics.html">Pneumatics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/Sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/Bumpers.html">Bumpers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Safety</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../safety/Placeholder.html">Safety</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motors/index.html">Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drive/index.html">Drive Bases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pneumatics/index.html">Pneumatics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gearshift/index.html">Gear Shift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sensors/index.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../limelight/index.html">Limelight</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Control Theory</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Introduction.html">What is PID?</a></li>
<li class="toctree-l2"><a class="reference internal" href="PID.html">Overview</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Advanced Integrators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#vocabulary">Vocabulary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#actuators">Actuators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integral-windup">Integral Windup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clamping">Clamping</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shooters/index.html">Shooters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto/index.html">Autonomous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/index.html">Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced Software</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Control Theory</a> &raquo;</li>
      <li>Advanced Integrators</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/software/pid/Advanced.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="advanced-integrators">
<h1>Advanced Integrators<a class="headerlink" href="#advanced-integrators" title="Permalink to this heading"></a></h1>
<div class="section" id="vocabulary">
<h2>Vocabulary<a class="headerlink" href="#vocabulary" title="Permalink to this heading"></a></h2>
<p>Plants can be broken into two fundamental parts:</p>
<p><strong>Actuator</strong>: Devices generating force/energy to change the system (ex. motor, heater, etc.)</p>
<p><strong>Process</strong>: Part the actuator is trying to impact</p>
<p><strong>Saturation</strong>: the mechanical limit of an actuator which can not be overrided (ex. max rpm of a motor)</p>
</div>
<div class="section" id="actuators">
<h2>Actuators<a class="headerlink" href="#actuators" title="Permalink to this heading"></a></h2>
<p>Actuators are not perfect linear systems in the real world. One major error is saturation.</p>
<p>In a motor with a PID controller, the PID controller is fed a constant error and in turn produces an increasing term. This term will cause the rpm of the motor to increase indefinitely to satiate what the controller asks for, however, it refuses to because the motor has a physical rpm limit, say 4000 rpm. Once it reaches 4000 rpm, it will flatline and will no longer increase, and will instead stay at a constant rpm.</p>
<p>All non linear actuators suffer from saturation, and all real life systems are non linear.</p>
</div>
<div class="section" id="integral-windup">
<h2>Integral Windup<a class="headerlink" href="#integral-windup" title="Permalink to this heading"></a></h2>
<p><img alt="Integral Windup due to saturation" src="../../../_images/Integral_Windup.jpg" /></p>
<p>In the diagram above, the motor saturates at 1000 rpm, however the integral controller wants the motor to speed up to 2000 rpm.</p>
<p>The motors are restricted by a human who prevents the motor from moving the process to the target destination. The motor saturates and remains at a constant 1000 rpm. Once it saturates, it remains stuck for a short period of time until the human releases the plant and it moves to the target destination.</p>
<p>However, once it it let go, the error barrels towards 0 and the integral term rapidly decelerates with one major problem: the rpm of the integral controller and the motor itself do not align. This causes integral windup to occur, causing the motor to overshoot the target and go far beyond it until it can recalibrate itself and is within the bounds of the integral controller once more. We combat this with an integrator windup limit.</p>
<p>Three popular methods to combat integral windup are: Clamping, Back-Calculation, and the Observer Approach. We will discuss Clamping.</p>
</div>
<div class="section" id="clamping">
<h2>Clamping<a class="headerlink" href="#clamping" title="Permalink to this heading"></a></h2>
<p><img alt="Clamping Diagram" src="../../../_images/Clamping_Diagram.jpg" /></p>
<p>Don’t be afraid of this diagram because it’s simpler than it seems. A quick summary is:</p>
<ul class="simple">
<li><p>We implement a clamping saturation limit and works by turning the integrator off</p></li>
<li><p>It performs two checks:</p>
<ul>
<li><p>First it compares the output before and after the saturation check. If they’re equal, a 0 is passed, and if they’re not equal, a 1 is passed</p></li>
<li><p>Secondly, it compares the signs of the controller output and the error. If they’re both positive, then that means the integrator is still adding to the output. If they’re both negative, then the integrator is making the output more negative.</p></li>
</ul>
</li>
<li><p>If both conditions are true, then the switch is triggered and clamps the * integrator and the value immediately decreases.</p></li>
<li><p>Clamping can help to make a PID controller perform better</p></li>
</ul>
<p>Do not set the integrator limit equal to the hardware limit, instead keep it slightly lower to account for fluctuations like mechanical fault or temperature changes.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="PID.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../shooters/index.html" class="btn btn-neutral float-right" title="Shooters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Team 3624, 2022.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>